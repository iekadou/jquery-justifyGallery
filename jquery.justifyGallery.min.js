/*!
 * jquery-justifyGallery v0.0.1 by @iekadou
 * Copyright (c) 2014 Jonas Braun
 *
 * http://www.noxic-action.de/page/programming/jquery-justifyGallery
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(b){var c=function(e,d){this.$gallery=b(e);this.options=b.extend({},c.defaults,d);this.indexImages();this.justify();this.registerLoadImages();this.registerWindowResize()};c.defaults={maxRowHeight:"300px",spacing:2,resizeCSS:{"min-width":"0","min-height":"0",height:"auto",width:"auto","max-width":"none","max-height":"none"}};c.prototype.indexImages=function(){var e=this;var f=b("body");var d=e.$gallery;d.css("position","relative");e.$images=d.find("img");e.imgCount=e.$images.length;if(e.$images.length==0){return}e.imageArray=[];e.$images.each(function(){var h=b(this);var g={};var j=h.parent("a");j.removeAttr("class","style");if(j.length==0){h.remove()}else{g.parent=j;g.el=h;var i=h.clone();i.css(e.options.resizeCSS).appendTo(f);g.height=parseInt(i.height());g.width=parseInt(i.width());i.remove();e.imageArray.push(g);if(!(j.parent().is(d))){j.appendTo(d)}j.css({display:"block",overflow:"hidden",position:"absolute"});h.css("position","relative")}});d.children().not("a").each(function(){b(this).remove()});d.children().each(function(){if(b(this).children().length!=b(this).children("img").length){b(this).remove()}})};c.prototype.justify=function(){var m=this;var j=m.$gallery.innerWidth();var g=0;var n=0;var h=[];var p=0;for(var q=0;q<m.imgCount;q++){m.imageArray[q]["el"].css("max-width","100%");n+=parseInt(m.imageArray[q]["width"]);if(g!=q){n+=m.options.spacing}if(n>j){h.push({start:g,end:q,width:n});g=q+1;n=0}}for(var q=0;q<h.length;q++){var l=p;var f=0;var r=h[q]["end"]-h[q]["start"]+1;var s=h[q]["width"]-j;var o=parseInt(s/r);var u=0;var v=parseInt(m.options.maxRowHeight);for(var e=h[q]["start"];e<=h[q]["end"];e++){if(e==h[q]["end"]&&r*o!=s){u=s-r*o}var k=m.imageArray[e]["width"]-o-u;u=0;m.imageArray[e]["parent"].css({top:l,left:f});m.imageArray[e]["parent"].css("width",k);f+=k+m.options.spacing;var t=m.imageArray[e]["el"].innerHeight();if(t<v){v=t}if(e==h[q]["end"]){p+=parseInt(v)+m.options.spacing;u=0}}for(var e=h[q]["start"];e<=h[q]["end"];e++){var t=m.imageArray[e]["el"].innerHeight();m.imageArray[e]["parent"].css("height",v);m.imageArray[e]["el"].css("top",parseInt((v-t)/2))}}var d=0;var v=parseInt(m.options.maxRowHeight);for(var q=h[h.length-1]["end"]+1;q<m.imgCount;q++){m.imageArray[q]["parent"].css({top:p,left:d,width:m.imageArray[q]["width"]});d+=m.imageArray[e]["width"]+m.options.spacing;var t=m.imageArray[q]["el"].innerHeight();if(t<v){v=t}if(q==(m.imgCount-1)){p+=parseInt(v)}}for(var q=h[h.length-1]["end"]+1;q<m.imgCount;q++){m.imageArray[q]["parent"].css("height",v)}m.$gallery.css("height",p)};c.prototype.registerWindowResize=function(){var d=this;b(window).resize(function(){d.justify()})};c.prototype.registerLoadImages=function(){var d=this;d.$images.each(function(){b(this).load(function(){d.indexImages();d.justify()})})};var a=b.fn.justifyGallery;b.fn.justifyGallery=function(d){return this.each(function(){var e=b(this).data("justifyGallery");if(!e){b(this).data("justifyGallery",(e=new c(b(this),d)))}})};b.fn.justifyGallery.Constructor=c;b.fn.justifyGallery.noConflict=function(){b.fn.justifyGallery=a;return this}}(jQuery));